/*! quasiform 2016-09-18 */
function recaptchaCallBack(){var a=$('[data-object="quasiform-recaptcha"][data-sitekey][id]');$.each(a,function(a,b){console.debug($(b));var c={},d=$(b).attr("data-sitekey");void 0!=d&&(c.sitekey=$(b).attr("data-sitekey")),grecaptcha.render($(b).attr("id"),c)})}$(function(){function a(a){var b=$(a);$.each(b,function(a,b){var c=$(b).is(":checked"),d=$(b).closest("form");"object"==typeof d&&(c?$(d).find('button[type="submit"]').removeAttr("disabled"):$(d).find('button[type="submit"]').attr("disabled",!0))})}console.log("quasiform.js");var b='input[data-quasiform="checkbox-agree"]';a(b),$(document).on("change",b,function(c){a(b)}),$(document).on("submit",'form[data-quasiform="form"]',function(a){var b=$(this);$(b).find('button[type="submit"]').attr("disabled","");var c='[data-quasiform="messages"]',d='[data-quasiform="errors"]',e=new FormData($(b)[0]),f=$(b).attr("action"),g=$(b).attr("method");$.ajax({contentType:!1,processData:!1,data:e,dataType:"json",type:g,url:f,complete:function(){b.find('button[type="submit"]').removeAttr("disabled")},error:function(a,b,c){404==a.status?console.log("������ 404"):500==a.status?console.log("������ 500"):console.log("������ "+a.status)},success:function(a,e){if("object"==typeof a){if(errorsList="",messagesList="",$(b).parent().find(d).hide(),$(b).parent().find(c).hide(),$(b).find(".form-group").removeClass("has-error"),a.errors.length>0){for(i=0;i<a.errors.length;i++)errorsList+="<li>"+a.errors[i]+"</li>";errorsList="<ul>"+errorsList+"</ul>"}else errorsList=a.message;if(a.messages.length>0){for(i=0;i<a.messages.length;i++)messagesList+="<li>"+a.messages[i]+"</li>";messagesList="<ul>"+messagesList+"</ul>"}else messagesList=a.message;if(a.success)$(b).parent().find(c).html(messagesList).fadeIn("fast"),$(b).fadeOut("fast").remove();else{$(b).parent().find(d).html(errorsList).fadeIn("fast");for(var f in a.field_errors){var g="",h=a.field_errors[f];for(i=0;i<h.length;i++)g+="<p>"+h[i]+"</p>"}$(b).find("button").removeAttr("disabled")}$(".form-group").each(function(){$(this).hasClass("has-error")||$(this).addClass("has-success")})}else console.log("����� ������� ����� �������� ������")}}),a.preventDefault()})});